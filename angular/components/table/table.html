<div class="table-responsive">
    <table class="table">
        <thead>
            @for (item of tableHeaders; track $index) {
            @if (item.sort == true) {
            <th [class.text-end]="item.align == 'right'" [sortable]="item.sortBy" (sort)="onSort($event)"><a
                    class="sort-by"> {{item.name}}
                </a></th>
            }
            @else {
            <th [class.text-end]="item.align == 'right'">
                {{item.name}}</th>
            }
            }
            @if (actions.length > 0) {
            <th class="text-center print-hidden">Action</th>
            }

        </thead>
        @if(tableData.length > 0) {
        <tbody>
            @for (data of tableData; track data; let rowIndex = $index) {
            <tr>
                @for (header of tableHeaders; track header; let colIndex = $index) {
                <td [class.text-end]="header.align == 'right'">
                    @if (header.property == 'sn') {
                    {{rowIndex + filterData.pageIndex * filterData.pageSize + 1}}
                    }
                    @else if(header.status == true) {

                    @if (hasEditPermission) {
                    <label class="switch">
                        <input [(ngModel)]="data[header.property]" (change)="onStatusChange.emit(data)" type="checkbox">
                        <span class="slider round"></span>
                    </label>
                    }
                    @else {
                    @if(data[header.property] == true) {
                    <span class="status success">Active</span>
                    }
                    @else {
                    <span class="status error">Inactive</span>
                    }
                    }
                    <span></span>
                    }

                    @else if(header.special_status == true) {
                    <span
                        [ngClass]="header?.class[data.property]"
                        class="status">
                        <div class="circle"></div>
                        {{data[header?.property]}}
                    </span>
                    }

                    @else if(header.desc == true){
                    <span class="ellipsis" matTooltip="{{ data[header?.property] }}" matTooltipPosition="above">
                        {{ data[header?.property] || 'N/A' }}
                    </span>
                    }
                    
                    @else if(header.chip == true){
                    <div class="d-flex align-items-center gap-md">

                        @for (item of data[header?.property]?.slice(0, header?.maxItems); track $index) {
                        <div class="chip primary">
                            <div class="circle"></div>
                            {{ item?.name || '-' }}
                        </div>
                        }

                        <!-- +N badge -->
                        @if (data[header?.property]?.length > header.maxItems) {
                        <div class="chip primary" matTooltip="{{ getRemainingItems(data[header?.property], header.maxItems) }}"
                            matTooltipPosition="above">
                            +{{ data[header?.property]?.length - header?.maxItems }}
                        </div>
                        }

                    </div>
                    }

                    @else {
                    {{ header.amount ? (data[header.property] | amount ) : (data[header.property] || '-') }}
                    }
                </td>
                }
                <td class="print-hidden">
                    @if (actionMode == 'inline') {
                    <div class="actions">
                        <img *ngIf="actions.includes('view')" (click)="onView.emit(data)"
                            src="../../../assets/svg/eye.svg" alt="">
                        <img *ngIf="actions.includes('edit') && hasEditPermission" (click)="onEdit.emit(data)"
                            src="../../../assets/svg/edit.svg" alt="">
                        <img *ngIf="actions.includes('delete') && hasDeletePermission" (click)="onDelete.emit(data)"
                            src="../../../assets/svg/trash.svg" alt="">
                    </div>
                    }
                    @else {
                    <dropdown-menu>
                        <div class="actions" dropdown-display>
                            <svg width="3" height="12" viewBox="0 0 3 12" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M3 6C3 6.30766 2.91203 6.60841 2.7472 6.86422C2.58238 7.12003 2.34811 7.31941 2.07402 7.43715C1.79994 7.55488 1.49834 7.58569 1.20736 7.52567C0.916393 7.46564 0.649119 7.31749 0.439341 7.09994C0.229562 6.8824 0.0867005 6.60522 0.0288227 6.30347C-0.0290551 6.00173 0.000649925 5.68896 0.114181 5.40472C0.227713 5.12047 0.419971 4.87753 0.666645 4.7066C0.913319 4.53568 1.20333 4.44444 1.5 4.44444C1.89782 4.44444 2.27936 4.60833 2.56066 4.90006C2.84196 5.19178 3 5.58744 3 6ZM1.5 3.11111C1.79667 3.11111 2.08668 3.01988 2.33336 2.84895C2.58003 2.67803 2.77229 2.43508 2.88582 2.15084C2.99935 1.8666 3.02906 1.55383 2.97118 1.25208C2.9133 0.950334 2.77044 0.673161 2.56066 0.455612C2.35088 0.238064 2.08361 0.0899117 1.79264 0.0298903C1.50166 -0.0301312 1.20006 0.000673996 0.925975 0.11841C0.651886 0.236147 0.417618 0.435526 0.252796 0.691336C0.0879742 0.947146 8.07989e-07 1.2479 8.07989e-07 1.55556C8.07989e-07 1.96811 0.158036 2.36378 0.439341 2.6555C0.720645 2.94722 1.10218 3.11111 1.5 3.11111ZM1.5 8.88889C1.20333 8.88889 0.913319 8.98012 0.666645 9.15105C0.419971 9.32197 0.227713 9.56492 0.114181 9.84916C0.000649925 10.1334 -0.0290551 10.4462 0.0288227 10.7479C0.0867005 11.0497 0.229562 11.3268 0.439341 11.5444C0.649119 11.7619 0.916393 11.9101 1.20736 11.9701C1.49834 12.0301 1.79994 11.9993 2.07402 11.8816C2.34811 11.7639 2.58238 11.5645 2.7472 11.3087C2.91203 11.0529 3 10.7521 3 10.4444C3 10.0319 2.84196 9.63622 2.56066 9.3445C2.27936 9.05278 1.89782 8.88889 1.5 8.88889Z"
                                    fill="currentColor" />
                            </svg>
                        </div>
                        <div *ngIf="actions.includes('view') && hasViewPermission" (click)="onView.emit(data)" class="dropdown-item"
                            dropdown-item>
                            <img src="../../../assets/svg/eye.svg" alt=""> View Details
                        </div>
                        <div *ngIf="actions.includes('edit') && hasEditPermission" (click)="onEdit.emit(data)"
                            class="dropdown-item" dropdown-item>
                            <img src="../../../assets/svg/edit.svg" alt=""> Edit Details
                        </div>
                        <div *ngIf="actions.includes('delete') && hasDeletePermission" (click)="onDelete.emit(data)"
                            class="dropdown-item" dropdown-item>
                            <img src="../../../assets/svg/trash.svg" alt=""> Delete Details
                        </div>

                    </dropdown-menu>
                    }

                </td>
            </tr>
            }

        </tbody>
        } @else {
        <tbody>
            <tr>
                <td class="no-data" [attr.colspan]="tableHeaders.length + 1">
                    <h3>No Data</h3>
                    <p>No Records Found...</p>
                </td>
            </tr>
        </tbody>
        }

    </table>
</div>